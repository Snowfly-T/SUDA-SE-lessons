# 信息检索综合实践

## 介绍

使用 Node.js 编写。程序运行后，将爬取南大 NLP 组所有老师的信息，包括姓名、教学（若有）、项目（若有）、论文（若有），然后保存到 `./data/` 目录下，并生成索引字典。第二次及之后运行时，则读取保存的信息和索引字典。

需注意在此过程中会将所有中文内容使用 OpenAI 提供的 GPT-3.5 API 翻译成英文，因此需要在 `./src/model.ts` 中配置 OPENAI_API_KEY 变量，否则无法运行。另外，由于 GFW 的限制，OpenAI API 在中国大陆通常情况下无法直接访问，因此如有必要还需在 `./src/proxy-bootstrap.ts` 中配置代理服务器。

在读取信息之后，会自动生成对应的 TF-IDF 向量矩阵。在此之后，程序将循环等待用户输入需要查询的文档内容，并在用户按下回车后展示每个老师、每个类别的前 5 个（若相似度大于 0 的文档大于 5 个）相似度最高的文档信息（相似度、文档 ID 及文档内容）。

本次作业的原理是将**每个老师**的**每个类别**的信息都作为一个独立的文档集（如，“陈家骏”->"teaching"，表示该老师的教学内容）。每个文档集是一个 .txt 文件，其中按行存储相应信息。搜索时，会搜索每个老师每个类别文档集中相似度最高的几个文档并展示出来。

## 软件架构

- 语言: TypeScript
- 运行时: Node.js (ts-node)
- 包管理器: npm / Yarn
- 代码风格: TypeScript ESLint Recommended
- 主要使用框架: Compromise (分词和词形还原), LangChain.js (提供对 LLM 服务的封装，用于翻译)
- 其他: Prettier + ESLint

## 安装教程

1. 确保电脑上已经安装 Node.js 运行时环境，如未安装，前往[官网](https://nodejs.org/en/download/)或以其他方式下载安装对应操作系统的版本。请确保 Node.js 版本不低于 18，否则可能由于代码中引用了一些较新的标准库而无法运行。（测试使用的 Node.js 版本为 19.9.0）
2. 在目录下启动命令行执行 `npm install --registry https://registry.npm.taobao.org`，安装依赖。
3. 执行 `npm run dev`，启动应用，如应用正常打印提示信息，说明运行成功。

## 使用说明

1. 应用爬取数据时需要调用 OpenAI 的 GPT-3.5 API 将中文翻译为英文。本项目并未在代码中提供可以使用的 API_KEY，请自行配置 `./src/model.ts` 中的 相应常量。
2. 由于 GFW 的限制，OpenAI API 在中国大陆通常情况下无法直接访问，因此如有必要还需在 `./src/proxy-bootstrap.ts` 中配置代理服务器。
3. 调用服务进行翻译需要一定耗时，约 30 秒，请耐心等待。
4. 默认情况下，`./data/` 目录中包含已经爬取好的数据，如需重新爬取，请删除 `./data/data.json` 文件。
